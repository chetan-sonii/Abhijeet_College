{# templates/admin/applications_list.html #}
{% extends "admin/base.html" %} {# if you have an admin base; otherwise extend main base #}

{% block title %}Applications - Admin{% endblock %}

{% block content %}
<div class="container py-4">
  <h3>Applications</h3>

  <table class="table table-striped table-hover mt-3">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Email</th>
        <th>Program</th>
        <th>Status</th>
        <th>Received</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for a in applications %}
      <tr>
        <td>{{ a.id }}</td>
        <td>{{ a.name }}</td>
        <td><a href="mailto:{{ a.email }}">{{ a.email }}</a></td>
        <td>{{ a.program.title if a.program else '—' }}</td>
        <td>{{ a.status }}</td>
        <td>{{ a.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin.application_edit', app_id=a.id) }}">View</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {# pagination controls #}
  {% if pagination and pagination.pages > 1 %}
  <nav aria-label="Pages">
    <ul class="pagination">
      {% if pagination.has_prev %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('admin.applications_list', page=pagination.prev_num) }}">Previous</a>
      </li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Previous</span></li>
      {% endif %}

      {% for p in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
        {% if p %}
          <li class="page-item {% if p == pagination.page %}active{% endif %}">
            <a class="page-link" href="{{ url_for('admin.applications_list', page=p) }}">{{ p }}</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">…</span></li>
        {% endif %}
      {% endfor %}

      {% if pagination.has_next %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('admin.applications_list', page=pagination.next_num) }}">Next</a>
      </li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
